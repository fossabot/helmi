---
service:
  _id: 0879e46a-6dcb-4da8-bb0d-af93bd8d450d
  _name: "datagrid"
  description: "Datagrid as a Service"
  chart: monostream/datagrid
  chart-version: 7.2.1
  plans:
  -
    _id: 22c6a797-f205-41d0-b887-d1324b4599bc
    _name: clusterip
    description: "Datagrid Instance with ClusterIP"
  -
    _id: b1669d78-667f-4626-9bce-7209b0069129
    _name: nodeport
    description: "Datagrid Instance with NodePort"
    chart-values:
      service:
        type: "NodePort"
---
chart-values:
  image_secretgeneration:
    pullPolicy: Always
  datagridUsername: "{{ generateUsername }}"
  datagridPassword: "{{ generatePassword }}"
  datagridMgmtUsername: "{{ generateUsername }}"
  datagridMgmtPassword: "{{ generatePassword }}"
  kube:
    auth: true
  encryption:
    node:
      enabled: true
      clusterpass: "{{ generatePassword }}"
      keystore:
        pass: "{{ generatePassword }}"
    client:
      enabled: true
      keystore:
        keypass: "{{ generatePassword }}"
        storepass: "{{ generatePassword }}"
  {{- if eq .Plan.Name "nodeport" }}
  service:
    nodePort: "{{ generateNumber 30000 32767 }}"
  {{- end }}
---
user-credentials:
  {{- if eq .Plan.Name "clusterip" }}
  hostname: "{{ .Release.Name }}-datagrid.{{ .Release.Namespace }}.svc.cluster.local"
  {{- else }}
  hostname: "{{ .Cluster.Address }}"
  {{- end }}
  rest_port: "{{ .Cluster.Port .Values.service.externalPortRest }}"
  hotrod_port: "{{ .Cluster.Port .Values.service.internalPortHotRod }}"
  external_hotrod_port: "{{ .Cluster.Port .Values.service.externalPortHotRod }}"
  username: "{{ .Values.datagridUsername }}"
  password: "{{ .Values.datagridPassword }}"
  mgmt_username: "{{ .Values.datagridMgmtUsername }}"
  mgmt_password: "{{ .Values.datagridMgmtPassword }}"
  {{- if .Secrets }}
  secrets:
{{ toYaml .Secrets | indent 4 }}
  {{- end }}